<html>
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
		<title>KIT DESARROLLO - 4G FACTOR</title>
	</head>
	<body>
		<center>
		<label><font color="BLUE" size="+3"><b>TIMBRAR XML</b></font></label><br><br>
		<b>C&oacute;digo PHP </b><br><br>
		</center>
		<pre name="code" class="php:nocontrols">
			//lib
			require_once('../conf/nusoap.php');
			//indicamos el archivo wspac.wsdl
			$client = new soapclient('wspac.wsdl', 'wsdl');

			$err = $client->getError();
			if ($err) {
				//   Muestra error
				echo 'Error al construir el cliente: ' . $err ;
			}else {
				//   token para inicio de sesion
				$token = 'TOKEN GENERADO EN OPENSESSION';
				// xml a Timbrar
				$xml = 'XML A TIMBRAR';

				$params = array(token => $token, xml => $xml); /*('token','xml')*/
				$answer = $client->call('createCFDI', array($params) );

				$err = $client->getError();
			  
				if ($err) {
					//     Muestra error
					echo 'Error: ' . $err;
					print_r($client->response);
					print_r($client->getDebug());
				} else {
					//     Respuesta ws
					print_r('Ok = '.$answer['ok']);
					print_r('errorCode = '.$answer['errorCode']);
					print_r('UUID ='.$answer['uuid']);
					print_r('Cadena SAT = '.$answer['string']);
					print_r('Fecha y hora de certificacion = '.$answer['date']);
					print_r('Sello Digital del Contribuyente que lo expide = '.$answer['cfdStamp']);
					print_r('Numero de serie del CSD del SAT = '.$answer['certNumber']);
					print_r('Sello Digital SAT  = '.$answer['satStamp']);
				}
			}
		</pre>
		<center>
			<br><br><a href="javascript:history.back()"> Volver Atr√°s</a> 
			<br><br><br><br>
			<b><font color="BLUE" size="-1">4G Factor, S.A. de C.V.</font></b>
		</center>
	</body>
</html>